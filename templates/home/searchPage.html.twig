{% extends 'base.html.twig' %}

{% block title %}SearchPage{% endblock %}

{% block body %}

    <section class="search">

        {% include "home/_searchBar.html.twig" %}

        <div class="searchItems">
            <h1>Results</h1>

            {% if songs == null %}
                
                <h2 class="mt-5">No result</h2>
            {% endif %}
            
            <div class="d-flex">

                
                {% for artist in artists %}    
            
                    {% if "ROLE_ARTIST" in artist.getRoles %}

                        <a href="{{path('app_artistDetail', {'id': artist.id})}}" class="text-decoration-none text-body mt-5 h-25">

                            <figure class="w-75">

                                <img src="{{asset('uploads/' ~ artist.avatar)}}" class="rounded-circle w-100" alt="profile picture">
                            </figure>
                            

                            <div class="flex">

                                
                                {{artist.username}}
                                <h3>Subscriber Count : {{artist.subUser2 |length}} </h3>
                            </div>

                        </a>
                            

                    {% endif %}

                {% endfor %}

                        
                <table class="mt-5 h-25">

                    <thead>
            
                        <tr>
                            <th></th>
                            <th>title</th>
                            <th>artist</th>
                        </tr>
                    </thead>
            
                    <tbody>
            
                        {% for song in songs %}
                            <tr>
                                <td>
                                    <figure>
                                        <img src="{{asset('uploads/' ~ song.cover)}}" alt="song img">
                                    </figure>
                                </td>
                                <td> <a href="{{path('app_songPlayer', {'id': song.id})}}">{{song.nameSong}} </a></td>
                                <td>{{song.username}}</td>
    
                            </tr>
                        {% endfor %}
            
                    </tbody>
                </table>

            </div>

            {% for album in albums %}
                
                <div class="mcard">

                    <a href="{{path('app_albumDetail', {'id': album.id})}}">

                        <figure>
                            <img src="{{asset('uploads/' ~ album.cover)}}" alt="album image">

                        </figure>
                        
                        <h3>{{album.nameAlbum}}</h3>
                    </a>

                </div>

            {% endfor %}
            
        </div>
    </section>
{% endblock %}

